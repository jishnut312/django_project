{% extends 'admin_base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h2 class="h5 mb-0">User Details</h2>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 text-center">
                    {% if user.userprofile.profile_pic %}
                        <img src="{{ user.userprofile.profile_pic.url }}" class="img-fluid rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                    {% else %}
                        <div class="rounded-circle bg-secondary d-flex align-items-center justify-content-center mb-3" style="width: 200px; height: 200px;">
                            <span class="text-white">No Image</span>
                        </div>
                    {% endif %}
                </div>
                <div class="col-md-8">
                    <h3>{{ user.username }}</h3>
                    <p><strong>Email:</strong> {{ user.email }}</p>
                    <p><strong>Joined:</strong> {{ user.date_joined|date:"F j, Y" }}</p>
                    <p><strong>Last Login:</strong> {{ user.last_login|date:"F j, Y H:i" }}</p>
                    <p><strong>Status:</strong> 
                        {% if user.userprofile.blocked %}
                            <span class="badge bg-danger">Blocked</span>
                        {% else %}
                            <span class="badge bg-success">Active</span>
                        {% endif %}
                    </p>
                    <p><strong>Bio:</strong> {{ user.userprofile.bio|default:"Not provided" }}</p>
                </div>
            </div>
            <div class="mt-4">
                <a href="{% url 'adminview' %}" class="btn btn-secondary">Back to Dashboard</a>
                <a href="{% url 'edit_user' user.id %}" class="btn btn-primary">Edit User</a>
                {% if user.userprofile.blocked %}
                    <a href="{% url 'unblock_user' user.id %}" class="btn btn-success">Unblock User</a>
                {% else %}
                    <a href="{% url 'block_user' user.id %}" class="btn btn-warning">Block User</a>
                {% endif %}
                <a href="{% url 'delete_user' user.id %}" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this user?')">Delete User</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}